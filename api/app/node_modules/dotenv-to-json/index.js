"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const { parse } = require('dotenv');
const readAll = (stream) => {
    return new Promise((resolve, reject) => {
        let buffer = '';
        stream.setEncoding('utf8');
        stream.on('readable', () => {
            while (true) {
                const chunk = stream.read();
                if (chunk === null)
                    break;
                buffer += chunk;
            }
        });
        stream.on('end', () => void resolve(buffer));
        stream.on('error', (error) => void reject(error));
    });
};
const envToJson = (env) => JSON.stringify(parse(env));
const run = () => {
    readAll(process.stdin)
        .then((env) => envToJson(env))
        .then((out) => void process.stdout.write(out));
};
exports.run = run;
